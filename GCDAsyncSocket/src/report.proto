syntax = "proto2";
import "common.proto";
package RPC;

option java_package = "cn.jingzhuan.rpc.pb";

enum report_data_cycle
{
	report_data_cycle_begin = -1;
	// 以分钟为周期
	report_data_cycle_1_min = 0;
	report_data_cycle_3_min = 1;
	report_data_cycle_5_min = 2;
	report_data_cycle_10_min = 3;
	report_data_cycle_15_min = 4;   
	report_data_cycle_20_min = 5;
	report_data_cycle_30_min = 6;
	report_data_cycle_60_min = 7;
	// 以天为周期
	report_data_cycle_day = 8;	
	// 以周为周期
	report_data_cycle_week = 9;
	// 以月为周期
	report_data_cycle_month = 10;
	// 以季度为周期
	report_data_cycle_quarter = 11;
	// 以年为周期
	report_data_cycle_year = 12;

	report_data_cycle_end = 10000;
}

// 行情完整包
message report_msg
{
	repeated string code = 1;
}

message s_report_result_msg
{
	required string     code = 1;						// 股票代码
	required string     name = 2;                       // 股票名称

	required uint32      time       = 3;                // 时间
	required double      last_close = 4;                // 上个交易日收盘价格
	required double      new        = 5;                // 最后成交价格
	required double      open       = 6;                // 今日开盘价格
	required double      high       = 7;                // 今日最高价格
	required double      low        = 8;                // 今日最低价格

	required double      vol             = 9;           // 今日累计成交量（总手）
	required double      amount          = 10;          // 今日累计成交额（金额）
	required double      five_day_avevol = 11;          // 5交易日均量

	repeated double    sel_price = 12;                  // 5档申卖价
	repeated double    sel_vol   = 13;                  // 5档申卖量
	repeated double    buy_price = 14;                  // 5档申买价
	repeated double    buy_vol   = 15;                  // 5档申买量

	optional double     pe        = 16;					// 市盈率
	optional double     hhjcap    = 19;					// 流通盘
	optional double     rise_vol  = 20;                 // 内盘
    optional double     drop_vol  = 21;                 // 外盘
	optional double     hsl       = 22;                 // 换手率
	optional double     zgb       = 23;                 // 总股本
	optional double     mgjzc     = 24;                 // 每股净资产
	optional double     mgsy      = 25;                 // 每股收益
};

message s_report_array_result_msg
{
	repeated s_report_result_msg report_data = 1;
}

// 分笔数据
message s_biddeal_msg
{
	required string code    = 1;		// 请求的股票代码
	required data_selector selector = 2;	 // 数据筛选器
}

message s_biddeal_result_msg
{
	required uint32 time   = 1;     // 时间
	required double price  = 2;		// 价格
	required double vol    = 3;	    // 累计成交量（百股）
	required double amount = 4;	    // 累计成交额（元）
	required double extend = 5;	    // B / S 方向
}

message s_biddeal_array_result_msg
{
	repeated s_biddeal_result_msg biddeal_data = 1;
}

// K线数据
message s_kline_msg
{
	required string code             = 1;	 // 股票代码
	required report_data_cycle cycle = 2;    // 请求周期
	required data_selector selector  = 3;	 // 数据筛选器
}
message s_kline_result_msg
{
	required uint32 time = 1;   // 时间
	required double open = 2;	// 开
	required double high = 3;	// 高
	required double close = 4;	// 收盘价, 如果在盘中， 则是最新价
	required double low = 5;	// 低
	required double vol = 6;	// 成交量
	required double amount = 7;	// 成交额
	required double hsl = 8;	// 换手率
	required double zdf = 9;	// 涨跌幅
};

message s_kline_array_result_msg
{
	repeated s_kline_result_msg kline_data = 1;
}

/** 股指期货持仓 */
message s_keep_msg
{
	required string code = 1;			// 股票代码
}

message s_keep_result_msg
{
	required string code = 1;          // 股票代码
	required string name = 2;		   // 股票名字（UTF-8编码）
	required double vol = 3;		   // 成交量
	required double buy_keep = 4;	   
	required double sell_keep = 5;
	required double vol_diu = 6;
	required double buy_keep_diu = 7;
	required double sell_keep_diu = 8;
};

message s_keep_array_result_msg
{
	repeated s_keep_result_msg keep_data = 1;
}

// 分时数据
message s_minute_msg
{
	required string code             = 1;		// 请求分时的数据
	required data_selector selector  = 2;	    // 数据筛选器
}

message s_minute_result_msg
{
	required uint32 time   = 1;		// 时间
	required double price  = 2;		// 现价
	required double vol    = 3;		// 成交量
	required double amount = 4;		// 成交额
};

message s_minute_array_result_msg
{
	repeated s_minute_result_msg minute_data = 1;
}

// 搜索股票, 搜索方式:
// 1. 中文首字母拼音
// 2. 个股代码
message search_stock_msg
{
	required string search_string = 1;			// 请求的股票代码
	optional int32 total_count    = 2  [default = 20];
	optional int32 offset         = 3;		    // 数据偏移
	required data_selector selector  = 4;	    // 数据筛选器
}

message search_stock_result_msg
{
    required string code = 1;					// 代码
    required string name = 2;					// 股票名字, 中文以UTF8编码
}

message search_stock_array_result_msg
{
	repeated search_stock_result_msg stock_data = 1;
}

enum colum_type
{
	colIndex			   	= 0;  //序号
	colStockCode			= 1;  //个股代码
	colStockName			= 2;  //个股名称
	colSuspended			= 3;  //停牌标记列(2013-11-5)
	colRiseScope			= 4;  //涨幅
	colLastClosePrice		= 5;  //昨收
	colOpenPrice			= 6;  //今开
	colHighPrice			= 7;  //最高
	colLowPrice				= 8;  //最低
	colNewPrice				= 9;  //最新
	colVolume				= 10; //总手
	colNowVol				= 11; //现手
	colAmount				= 12; //总额
	colAvePrice				= 13; //均价
	colRise					= 14; //涨跌
	colAmplitude			= 15; //振幅
	colCommitScale			= 16; //委比
	colCommitDif			= 17; //委差
	colVolumeScale			= 18; //量比
	colCommitBuyVol			= 19; //委买
	colCimmitSellVol		= 20; //委卖
	colCommitBuy			= 21; //委买价
	colCimmitSell			= 22; //委卖价
	colRiseVol				= 23; //内盘
	colDropVol				= 24; //外盘
	colRiseSpeed			= 25; //涨速
	colCommitBuyVol1		= 26; //买一量
	colCommitBuyVol2		= 27; //买二量
	colCommitBuyVol3		= 28; //买三量
	colCommitBuyPrice1		= 29; //买一价
	colCommitBuyPrice2		= 30; //买二价
	colCommitBuyPrice3		= 31; //买三价
	colCommitSellVol1		= 32; //卖一量
	colCommitSellVol2		= 33; //卖二量
	colCommitSellVol3		= 34; //卖三量
	colCommitSellPrice1		= 35; //卖一价
	colCommitSellPrice2		= 36; //卖二价
	colCommitSellPrice3		= 37; //卖三价
	colTurnover				= 38; //换手率
	colDay5AveVol			= 39; // 五日均量
	colPE					= 40; // 市盈率
	colDay3RiseScope		= 41; // 三日涨幅
	colDay5RiseScope		= 42; // 周涨幅
	colDay20RiseScope		= 43; // 月涨幅
	colCommitBuyVol4		= 44; //买四量
	colCommitBuyPrice4		= 45; //买四价
	colCommitSellVol4		= 46; //卖四量
	colCommitSellPrice4		= 47; //卖四价
	colZGB					= 48; //总股本
	colGJG					= 49; //国家股
	colFQFRG				= 50; //发起人法人股
	colFRG					= 51; //法人股
	colBG					= 52; //B股
	colHG					= 53; //H股
	colLTAG					= 54; //流通A股
	colZGG					= 55; //职工股
	colA2ZPG				= 56; //A2转配股
	colZZC					= 57; //总资产
	colLDZC					= 58; //流动资产
	colGDZC					= 59; //固定资产
	colWXZC					= 60; //无形资产
	colCQTZ					= 61; //长期投资
	colLDFZ					= 62; //流动负债
	colCQFZ					= 63; //长期负债
	colZBGJJ				= 64; //资本公积金
	colMGGJJ				= 65; //每股公积金
	colGDQY					= 66; //股东权益
	colZYSR					= 67; //主营收入
	colZYLR					= 68; //主营利润
	colQTLR					= 69; //其他利润
	colYYLR					= 70; //营业利润
	colTZSY					= 71; //投资收益
	colBTSY					= 72; //补贴收入
	colYYWSZ				= 73; //营业外收支
	colSNSYTZ				= 74; //上年损益调整
	colLRZE					= 75; //利润总额
	colSHLR					= 76; //税后利润
	colJLR					= 77; //净利润
	colWFPLR				= 78; //未分配利润
	colMGWFP				= 79; //每股未分配
	colMGSY					= 80; //每股收益
	colMGJZC				= 81; //每股净资产
	colTZMGJZC				= 82; //调整每股净资
	colGDQYB				= 83; //股东权益比
	colJZSYL				= 84; //净资产收益率
	colMin5RiseScope		= 85; //五分钟涨幅
	colDay5Turnover			= 86; //5天换手
	colDay20Turnover		= 87; //20天换手
	colContribution			= 88; //贡献度
	colLargeMidDealDif		= 89; //主力净买额
	colLargeDealScale		= 93; //主力比例
	colMidDealScale			= 94; //跟风比例
	colSmallDealScale		= 95; //散户比例
	colRelative				= 96; // 相关系数
	colLargeDealDif			= 97; //主力
	colMidDealDif			= 98; //跟风
	colSmallDealDif			= 99; //散户
	colLargeDealAdd			= 100;//主力增仓 = 主力净买额/成交额
	colHS300Contri			= 106;//106 沪深300贡献度
	colHS300Min5Contri		= 107;//107 沪深300的5分钟贡献度
	colLargeMidScale		= 108;//主力净买额占流通总值的比
	colAllDealDif			= 110;//资金净买
	colD5LargeMidDif		= 111;//5日主力
	colD10LargeMidDif		= 112;//10日主力
	colD20LargeMidDif		= 113;//20日主力
	colAllPTJZ				= 114;// 800800 基本定位平台价值性
	colBlockPTJZ			= 115;// 板块基本定位平台价值
	colAllCZX				= 116;// 800800 成长性
	colBlockCZX				= 117;// 板块成长性
	colJBMPJ				= 118;// 经传基本面评级
	colRiseDropScale		= 119;//涨跌分布
	colRiseMostInBlock		= 120;//领涨股
	colBLJC					= 121;//捕捞金叉
	colStockBlock			= 122;//所属板块
	colFXJ					= 123;//发行价
	colD3LargeMidDif		= 124;//3日主力
	colDay3Turnover			= 125;//3日换手
	colMonth3Turnover		= 126;//3月换手
	colMonth6Turnover		= 127;//半年换手
	colContinueRiseDay		= 128;//连续涨跌天数
	colHigestPrice			= 129;//历史最高价
	colLowestPrice			= 130;//历史最低价
	colMonth3Rise			= 131;//3月涨幅
	colMonth6Rise			= 132;//半年涨幅
	colYear1Rise			= 133;//年涨幅
	colBljjDn				= 134;//捕捞季节动能
	colJgkp					= 135;//机构控盘
	colYlw					= 136;//压力位
	colZcw					= 137;//支撑位
	colDqqs					= 138;//短期趋势
	colLjphd				= 139;//量价配合度
	colJgpj					= 140;//机构评级
	colBPoint				= 141;//B点
	colSPoint				= 142;//S点
	col20HigestPrice		= 143;//20日最高价
	col20LowestPrice		= 144;//20日最低价
	colRiseInBlock			= 145;//板块内涨股个数
	colDropInBlock			= 146;//板块内跌股个数
	colKeepInBlock			= 147;//板块内价格不变股个数
	colBLSC					= 148;//捕捞死叉
	colXSMLL				= 149;//销售毛利率
	colXSJLL				= 150;//销售净利率
	colMGXJLL				= 151;//每股现金流量
	colZYSRZZL				= 152;//主营业务收入增长率
	colJLRZZL	     		= 153;//净利润增长率(％)
	colIFSTS				= 154;//升贴水
	colIFCC					= 155;//股指期货/期权持仓
	colIFRZC				= 156;//股指期货/期权日增仓
	colIFZJSJ				= 157;//股指期货/期权昨结算价
	col10DayRise			= 158;//10日涨幅
	colDQQSDN				= 159;//短期趋势动能
	colDQQSBH				= 160;//短期趋势变化
	colZQQSDN				= 161;//中期趋势动能
	colZQQSBH				= 162;//中期趋势变化
	colFullName				= 163;//全称
	colContractCode			= 164;//合约代码
	colUnderlyingCode	    = 165;//标的代码
	colUnderlyingName	    = 166;//标的名称
	colExcercizePrice		= 167;//行权价格
	colExcercizeDate		= 168;//行权日期
	colOptionVol			= 169;//期权行权价格档的总手(认购期权总手+认沽期权总手)
	colExcercizePriceSort	= 170;
	colPB 					= 171;
	colEnd                  = 172;
}

//板块代码对应的板块编号
// 这里是系统板块
//RBEGIN    = 0,		        // 开始
//RHSAG     = 0,				// 沪深A股
//RSHZS     = 1, 				// 上海指数
//RSHAG     = 2, 				// 上海A股
//RSHBG     = 3, 				// 上海B股
//RSHJJ     = 4, 				// 上海基金
//RSHZQ     = 5, 				// 上海债券
//RSHQZ     = 6,                // 上海权证
//RSHQT	    = 7,                // 上海其他
//RSZZS     = 8,                // 深圳指数
//RSZAG     = 9,                // 深圳A股
//RSZBG     = 10,               // 深圳B股
//RSZJJ     = 11,               // 深圳基金
//RSZZQ     = 12,				// 深圳债券
//RSZQZ	    = 13,               // 深圳权证
//RSZQT     = 14,               // 深圳其他
//RHYBK     = 16,				// 行业板块
//RGNBK	    = 17,	            // 概念板块
//RDQBK     = 18,               // 地区板块
//RGZQH     = 19,               // 股指期货
//RCYB	    = 20,				// 创业版
//RZXB	    = 21,               // 中小版
//RFXTS     = 26,               // 风险提示
//RZHBK     = 27,				// 综合板块
//RGGQY     = 30,               // 个股期权
//REND      = 21                //结束
// 这里是具体的板块（比如玻璃行业, 银行行业等）
// 计算方法比如玻璃行业股票代码是 800801, 取后面三位数801 然后减去700 得到101, 那么101就是对应的板块编号

//排行榜数据
message s_board_report_data_msg
{
    required uint32     block_code   = 1;                        // 请求的板块编号
    required uint32     block_offset = 2;                        // 请求数据的偏移量
    required uint32     count        = 3;                        // 请求的数量
    required colum_type sort_colum   = 4;                        // 哪一列作为排序
    required bool       is_asc       = 5;                        // 排序true为正序， false为反序
    repeated colum_type colum_array  = 6;                        // 请求哪几列的数据
}

// kv
message s_board_report_colum_data_msg
{
    required colum_type    key      = 1;                             // 内容key
    required double        value    = 2;                             // 内容value
    optional string        strvalue = 3;                             // string;类型的返回值
}

// 排行榜中一行数据的定义
message s_borad_report_line_data
{
    optional uint32         index = 1;                      // 排名
    optional string         code  = 2;                      // 股票代码
    optional string         name  = 3;                      // 股票名称
    repeated s_board_report_colum_data_msg colum_data = 4;        // 请求的这一行的内容
}

// 排行榜的最后返回数据
message s_borad_report_result_msg
{
    repeated s_borad_report_line_data datas = 1;            // 多行数据
}

message open_day_result_msg
{
	required uint32 day = 1;						// 最后一个开盘日的时间戳
	required bool status = 2 [default = false];	// 盘中： true, 非盘中： false
}

message s_board_report_optional_msg
{
	repeated string      codes        = 1;							// 请求的股票代码
	optional colum_type  sort_colum   = 4;                          // 哪一列作为排序
	optional bool        is_asc       = 2;							// 排序true为正序，false为反序
	repeated colum_type  colum_array  = 3;							// 请求哪几列数据
}

// 返回自选股排行榜的数据
message s_borad_report_optional_result_msg
{
    repeated s_borad_report_line_data datas = 1;            // 多行数据
}

// 请求板块的前几个
message s_borad_report_top_msg
{
	repeated uint32        block_codes    = 1;								// 板块的代码
	required colum_type    sort_colum     = 2;								// 那一列做为排序
	required bool          is_asc         = 3;								// 正序还是反序
	repeated colum_type    colum_array    = 4;								// 请求哪几列数据
	required uint32		   count          = 5;
}

message s_borad_report_block_msg
{
	required string code = 1;								// 板块代码
	required string name = 2;								// 板块名称
	repeated s_borad_report_line_data datas = 3;            // 多行数据
}

// 请求板块数据的前几个的结果
message s_borad_report_top_result_msg
{
	repeated s_borad_report_block_msg datas = 1;		// 所有的结果
}


message s_index_keep_line_msg
{
    required string code              = 1;                       // code事实上也是名称
    required string name              = 2;                       // 名称
    required double vol               = 3;                       // 持仓量  
    required double buykeep           = 4;                       // 买入量
    required double sellkeep          = 5;                       // 卖出量
    required double voldif            = 6;                       // 增减
    required double buykeepdif        = 7;
    required double sellkeepdif       = 8;
}

message s_index_keep_result_msg
{
    repeated s_index_keep_line_msg  datas = 1;                        //所有的结果
}


message s_block_relation_request
{
    required string code = 1;                                   // 需要查询的个股code
}

message s_block_relation_colunm_msg
{
    required string code = 1;                                   // 板块代码
    required string name = 2;                                   // 板块名称
}

message s_block_relation_result
{
    repeated s_block_relation_colunm_msg datas = 1;                                  // 返回的板块信息
}

message s_code_name_line
{
    required string code = 1;           // 股票代码
    required string name = 2;           // 股票名称
}

message s_code_name_relation_result
{
    repeated s_code_name_line datas = 1;                    // 返回板块信息
}
